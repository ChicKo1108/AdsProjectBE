# 数据库种子文件 (Database Seeds)

本目录包含了项目中所有数据表的种子文件，用于初始化测试数据。

## 文件说明

### 种子文件列表
- `01_user.js` - 用户表种子数据
- `02_account.js` - 账户表种子数据
- `03_ad_group.js` - 广告组表种子数据
- `04_ad_plan.js` - 广告计划表种子数据
- `05_ad_creatives.js` - 广告创意表种子数据
- `06_ad_plan_ad_group.js` - 广告计划与广告组关联表种子数据

### 执行顺序
种子文件按照文件名前缀的数字顺序执行，确保外键依赖关系正确：
1. 用户表 (无依赖)
2. 账户表 (无依赖)
3. 广告组表 (无依赖)
4. 广告计划表 (无依赖)
5. 广告创意表 (无依赖)
6. 关联表 (依赖广告计划和广告组)

## 使用方法

### 运行所有种子文件
```bash
npm run seed
```

### 创建新的种子文件
```bash
npm run seed:make seed_name
```

### 手动运行特定种子文件
```bash
knex seed:run --specific=01_users.js
```

## 测试数据说明

### 用户数据
- **admin** (super-admin): 系统管理员，密码: admin123
- **manager** (admin): 广告经理，密码: 123456
- **user1, user2** (user): 普通用户，密码: 123456

### 账户数据
- 余额: 10,000.00
- 今日消耗: 150.50
- 日预算: 500.00

### 广告组数据
- 移动应用推广组
- 游戏推广组
- 电商推广组
- 教育推广组
- 金融推广组

### 广告计划数据
- 春季促销广告计划 (CPC, 进行中)
- 夏季游戏推广计划 (CPM, 进行中)
- 电商双11预热计划 (CPA, 暂停)

### 广告创意数据
- 春季促销横幅广告 (活跃)
- 游戏下载激励视频 (活跃)
- 电商产品展示广告 (暂停)
- 教育APP推广信息流 (活跃)
- 金融理财开屏广告 (活跃)

### 关联关系
- 春季促销计划 → 移动应用推广组 + 电商推广组
- 夏季游戏推广计划 → 游戏推广组 + 移动应用推广组
- 电商双11预热计划 → 电商推广组 + 金融推广组

## 注意事项

1. **数据清理**: 每个种子文件都会先清空对应表的数据
2. **外键约束**: 确保按照正确顺序执行，避免外键约束错误
3. **密码加密**: 用户密码使用bcrypt加密存储
4. **时间戳**: 所有记录都包含created_at和updated_at时间戳
5. **测试环境**: 这些数据仅用于开发和测试环境

## 开发建议

- 在开发新功能前运行种子文件，确保有足够的测试数据
- 修改种子数据时，考虑对现有测试用例的影响
- 生产环境不要运行这些种子文件
- 定期更新种子数据，保持与业务逻辑的一致性